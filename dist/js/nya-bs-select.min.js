/**
 * nya-bootstrap-select v2.1.6
 * Copyright 2014 Nyasoft
 * Licensed under MIT license
 */
!function(){"use strict";function e(){return++c}function t(e){return e&&e.window===e}function n(e){return"string"==typeof e}function a(e){if(null==e||t(e))return!1;var a=e.length;return 1===e.nodeType&&a?!0:n(e)||Array.isArray(e)||0===a||"number"==typeof a&&a>0&&a-1 in e}function l(){return Object.create(null)}function r(t,n){var a,l=typeof t;return"function"==l||"object"==l&&null!==t?"function"==typeof(a=t.$$hashKey)?a=t.$$hashKey():void 0===a&&(a=t.$$hashKey=(n||e)()):a=t,l+":"+a}function s(e,t,n){var a,l,r=[],s=[];for(a=0;a<t.length;a++)for(l=0;l<e.length;l++)e[l][n]?e[l][n]===t[a]&&s.push(e[l]):r.push(e[l]);return s=s.concat(r)}function o(e){var t=e[0],n=e[e.length-1],a=[t];do{if(t=t.nextSibling,!t)break;a.push(t)}while(t!==n);return angular.element(a)}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}var c=0,d=function(e){return e.clone[0]},u=function(e){return e.clone[e.clone.length-1]},p=function(e,t,n,a,l,r,s,o){e[n]=a,l&&(e[l]=r),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t)),o&&(e.$group=o)},f=function(e,t){e.data("isolateScope",t)},h=function(e,t){var n,a=e.length;if(0===a)return!1;for(n=0;a>n;n++)if(S(t,e[n]))return!0;return!1},v=function(e,t){var n,a=e.length;if(0===a)return-1;for(n=0;a>n;n++)if(S(t,e[n]))return n;return-1},g=function(e,t,n){var a,l=e,r=typeof n;if(e==t)return null;do if("string"===r){if(a=" "+l.className+" ",1===l.nodeType&&a.replace(/[\t\r\n\f]/g," ").indexOf(n)>=0)return l}else if(l==n)return l;while((l=l.parentNode)&&l!=t&&9!==l.nodeType);return null},C=function(e){var t,n=e.className.replace(/[\t\r\n\f]/g," ").trim();t=n.split(" ");for(var a=0;a<t.length;a++)/\s+/.test(t[a])&&(t.splice(a,1),a--);return t},m=function(e,t){var n=C(e);return-1!==n.indexOf(t)},y=function(e,t){var n,a,l;if(-1!==e.text().toLowerCase().indexOf(t.toLowerCase()))return!0;for(n=e.children(),l=n.length,a=0;l>a;a++)if(-1!==n.eq(a).text().toLowerCase().indexOf(t.toLowerCase()))return!0;return!1},b=angular.element,S=angular.equals,w=angular.copy,$=angular.extend,T=angular.module("nya.bootstrap.select",[]);T.provider("nyaBsConfig",function(){var e=null,t={"en-us":{defaultNoneSelection:"Nothing selected",noSearchResult:"NO SEARCH RESULT",numberItemSelected:"%d items selected",selectAll:"Select All",deselectAll:"Deselect All"}},n=w(t);this.setLocalizedText=function(e,t){if(!e)throw new Error("localeId must be a string formatted as languageId-countryId");n[e]||(n[e]={}),n[e]=$(n[e],t)},this.useLocale=function(t){e=t},this.$get=["$locale",function(a){var l;return l=e?n[e]:n[a.id],l||(l=t["en-us"]),l}]}),T.controller("nyaBsSelectCtrl",function(){var e=this;e.keyIdentifier=null,e.valueIdentifier=null,e.isMultiple=!1,e.onCollectionChange=function(){},e.setId=function(t){e.id=t||"id#"+Math.floor(1e4*Math.random())}}),T.directive("nyaBsSelect",["$parse","$document","$timeout","$compile","nyaBsConfig",function(e,t,n,a,l){var r="Nothing selected",s='<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="pull-left filter-option"></span><span class="pull-left special-title"></span>&nbsp;</button>',o='<div class="dropdown-menu show"></div>',c='<div class="bs-searchbox"><input type="text" class="form-control"></div>',d='<ul class="dropdown-menu inner"></ul>',u='<li class="no-search-result"><span>NO SEARCH RESULT</span></li>',p='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">SELECT ALL</button><button class="actions-btn bs-deselect-all btn btn-default">DESELECT ALL</button></div></div>';return{restrict:"ECA",require:["ngModel","nyaBsSelect"],controller:"nyaBsSelectCtrl",compile:function(f,$){f.addClass("btn-group");var T,x,A,q,E,N,L,k,I=function(e){var t;return t=$.titleTpl?b($.titleTpl):$.title?document.createTextNode($.title):H.defaultNoneSelectionTpl?b(H.defaultNoneSelectionTpl):H.defaultNoneSelection?document.createTextNode(H.defaultNoneSelection):document.createTextNode(r),e&&($.titleTpl||H.defaultNoneSelectionTpl)?a(t)(e):t},R=f.children(),O=b(s),V=b(o),B=b(d),H=l,P="undefined"!=typeof $.multiple;for(q=C(f[0]),q.forEach(function(e){/btn-(?:primary|info|success|warning|danger|inverse)/.test(e)&&(f.removeClass(e),O.removeClass("btn-default"),O.addClass(e)),/btn-(?:lg|sm|xs)/.test(e)&&(f.removeClass(e),O.addClass(e)),"form-control"===e&&O.addClass(e)}),B.append(R),E=R.length,N=0;E>N;N++)L=R.eq(N),(L.hasClass("nya-bs-option")||L.attr("nya-bs-option"))&&(L.find("a").attr("tabindex","0"),k=L.attr("value"),angular.isString(k)&&""!==k&&(L.attr("data-value",k),L.removeAttr("value")));return"true"===$.liveSearch&&(T=b(c),$.noSearchTitle?u=u.replace("NO SEARCH RESULT",$.noSearchTitle):$.noSearchTitleTpl?u=u.replace("NO SEARCH RESULT",$.noSearchTitleTpl):H.noSearchResultTpl?u=u.replace("NO SEARCH RESULT",H.noSearchResultTpl):H.noSearchResult&&(u=u.replace("NO SEARCH RESULT",H.noSearchResult)),x=b(u),V.append(T),B.append(x)),"true"===$.actionsBox&&P&&(H.selectAllTpl?p=p.replace("SELECT ALL",H.selectAllTpl):H.selectAll&&(p=p.replace("SELECT ALL",H.selectAll)),H.deselectAllTpl?p=p.replace("DESELECT ALL",H.deselectAllTpl):H.selectAll&&(p=p.replace("DESELECT ALL",H.deselectAll)),A=b(p),V.append(A)),b(O[0].querySelector(".special-title")).append(I()),V.append(B),f.append(O),f.append(V),function(a,l,r,s){function o(){var e,t,n=B.children(),a=n.length;for(e=0;a>e;e++)if(t=n.eq(e),t.hasClass("active")&&t.hasClass("nya-bs-option")&&!t.hasClass("not-match"))return t;return null}function c(e){for(var t,n=e.childNodes,a=n.length,l=0;a>l;l++)if(t=n[l],1===t.nodeType&&"a"===t.tagName.toLowerCase()){t.focus();break}}function d(e){var t;t=e?B.children().eq(0):B.children().eq(B.children().length-1);for(var n=0;n<B.children().length;n++){var a=B.children().eq(n);if(!a.hasClass("not-match")&&a.hasClass("selected"))return B.children().eq(n)[0]}return!t.hasClass("nya-bs-option")||t.hasClass("disabled")||t.hasClass("not-match")?e?u(t[0],"nextSibling"):u(t[0],"previousSibling"):t[0]}function u(e,t){if(!e||m(e,"nya-bs-option")){for(var n=e;(n=i(n,t))&&n.nodeType;)if(m(n,"nya-bs-option")&&!m(n,"disabled")&&!m(n,"not-match"))return n;return null}}function p(e){if(R&&!k){var t,n,l;if(t=B[0].querySelectorAll(".nya-bs-option"),t.length>0){n=N.$viewValue,l=Array.isArray(n)?w(n):[];for(var r=0;r<t.length;r++){var s=b(t[r]);if(!s.hasClass("disabled")){var o,i;o=C(s),"undefined"!=typeof o&&(i=v(l,o),e&&-1==i?(l.push(o),s.addClass("selected")):e||-1==i||(l.splice(i,1),s.removeClass("selected")))}}N.$setViewValue(l),a.$digest(),T()}}}function f(e){var t,n,r,s=N.$viewValue;t=C(e),"undefined"!=typeof t&&(R?(n=Array.isArray(s)?w(s):[],r=v(n,t),-1===r?(n.push(t),e.addClass("selected")):(n.splice(r,1),e.removeClass("selected"))):(B.children().removeClass("selected"),n=t,e.addClass("selected"))),N.$setViewValue(n),a.$digest(),R||(l.hasClass("open")&&l.triggerHandler("blur"),l.removeClass("open"),O[0].focus()),T()}function C(e){var t;return E?(t=e.data("isolateScope"),E(t)):L.valueIdentifier||L.keyIdentifier?(t=e.data("isolateScope"),t[L.valueIdentifier]||t[L.keyIdentifier]):e.attr("data-value")}function $(e){var t=e.find("a");return 0===t.children().length||t.children().eq(0).hasClass("check-mark")?t[0].firstChild.cloneNode(!1):t.children().eq(0)[0].cloneNode(!0)}function T(){var e=N.$viewValue;l.triggerHandler("change");var t=b(O[0].querySelector(".filter-option"));b(O[0].querySelector(".special-title"));return"undefined"==typeof e?(O.addClass("show-special-title"),void t.empty()):void(R&&0===e.length?(O.addClass("show-special-title"),t.empty()):(O.removeClass("show-special-title"),n(function(){var n,a,l,s,o,i,c=B.children(),d=c.length,u=[];if(R&&"count"===r.selectedTextFormat?i=1:R&&r.selectedTextFormat&&(o=r.selectedTextFormat.match(/\s*count\s*>\s*(\d+)\s*/))&&(i=parseInt(o[1],10)),"undefined"!=typeof i&&e.length>i)return t.empty(),void(H.numberItemSelectedTpl?t.append(b(H.numberItemSelectedTpl.replace("%d",e.length))):H.numberItemSelected?t.append(document.createTextNode(H.numberItemSelected.replace("%d",e.length))):t.append(document.createTextNode(e.length+" items selected")));for(l=0;d>l;l++)a=c.eq(l),a.hasClass("nya-bs-option")&&(n=C(a),R?Array.isArray(e)&&h(e,n)&&(s=a.attr("title"),s?u.push(document.createTextNode(s)):u.push($(a))):S(e,n)&&(s=a.attr("title"),s?u.push(document.createTextNode(s)):u.push($(a))));if(0===u.length)t.empty(),O.addClass("show-special-title");else if(1===u.length)O.removeClass("show-special-title"),t.empty(),t.append(u[0]);else for(O.removeClass("show-special-title"),t.empty(),l=0;l<u.length;l++)t.append(u[l]),l<u.length-1&&t.append(document.createTextNode(", "))})))}function x(){var e,t,n=B.find("li"),a=n.length;for(t=0;a>t;t++)if(e=n.eq(t),e.hasClass("nya-bs-option")||e.attr("nya-bs-option")){A=e[0].clientHeight;break}if(/\d+/.test(r.size)){var l=parseInt(r.size,10);B.css("max-height",l*A+"px"),B.css("overflow-y","auto")}}var A,q,E,N=s[0],L=s[1],k=!1,I=e(L.valueExp),R="undefined"!=typeof r.multiple,O=b(l[0].querySelector(".dropdown-toggle")),V=O.next(),B=b(V[0].querySelector(".dropdown-menu.inner")),P=b(V[0].querySelector(".bs-searchbox")),D=b(B[0].querySelector(".no-search-result")),M=b(V[0].querySelector(".bs-actionsbox"));L.valueExp&&(E=function(e,t){return I(e,t)}),L.setId(l.attr("id")),R&&(L.isMultiple=!0,N.$isEmpty=function(e){return!e||0===e.length}),"undefined"!=typeof r.disabled&&a.$watch(r.disabled,function(e){e?(O.addClass("disabled"),O.attr("disabled","disabled"),q=O.attr("tabindex"),O.attr("tabindex","-1"),k=!0):(O.removeClass("disabled"),O.removeAttr("disabled"),q?O.attr("tabindex",q):O.removeAttr("tabindex"),k=!1)}),L.onCollectionChange=function(e,t){var n,l=[],r=!1,s=w(N.$modelValue);if(s){if(Array.isArray(e)&&e.length>0){if(E)for(n=0;n<e.length;n++)l.push(E(a,e[n]));else for(n=0;n<e.length;n++)L.valueIdentifier?l.push(e[n][L.valueIdentifier]):L.keyIdentifier&&l.push(e[n][L.keyIdentifier]);if(R){for(n=0;n<s.length;n++)h(l,s[n])||(r=!0,s.splice(n,1),n--);r&&(N.$setViewValue(s),T())}else h(l,s)||(s=l[0],N.$setViewValue(s),T())}t&&T()}},B.on("click",function(e){if(!k&&!b(e.target).hasClass("dropdown-header")){var t,n=g(e.target,B[0],"nya-bs-option");if(null!==n){if(t=b(n),t.hasClass("disabled"))return;f(t)}}});var U=function(e){null===g(e.target,l.parent()[0],l[0])&&(l.hasClass("open")&&l.triggerHandler("blur"),l.removeClass("open"))};t.on("click",U),O.on("blur",function(){l.hasClass("open")||l.triggerHandler("blur")}),O.on("click",function(){var e;l.toggleClass("open"),l.hasClass("open")&&"undefined"==typeof A&&x(),"true"===r.liveSearch&&l.hasClass("open")?(P.children().eq(0)[0].focus(),e=d(!0),e&&(B.children().removeClass("active"),b(e).addClass("active"))):l.hasClass("open")&&(e=d(!0),e&&c(e))}),"true"===r.actionsBox&&R&&(M.find("button").eq(0).on("click",function(){p(!0)}),M.find("button").eq(1).on("click",function(){p(!1)})),"true"===r.liveSearch&&P.children().on("input",function(){var e,t,n,a=P.children().val(),l=0,r=B.children(),s=r.length;if(a){for(e=0;s>e;e++)t=r.eq(e),t.hasClass("nya-bs-option")&&(y(t.find("a"),a)?(t.removeClass("not-match"),l++):t.addClass("not-match"));0===l?D.addClass("show"):D.removeClass("show")}else{for(e=0;s>e;e++)t=r.eq(e),t.hasClass("nya-bs-option")&&t.removeClass("not-match");D.removeClass("show")}n=d(!0),n&&(r.removeClass("active"),b(n).addClass("active"))}),N.$render=function(){var e,t,n=N.$modelValue,a=B.children(),l=a.length;if("undefined"==typeof n)for(e=0;l>e;e++)a.eq(e).hasClass("nya-bs-option")&&a.eq(e).removeClass("selected");else for(e=0;l>e;e++)a.eq(e).hasClass("nya-bs-option")&&(t=C(a.eq(e)),R?h(n,t)?a.eq(e).addClass("selected"):a.eq(e).removeClass("selected"):S(n,t)?a.eq(e).addClass("selected"):a.eq(e).removeClass("selected"));T()},l.on("keydown",function(e){var t=e.keyCode;if(27===t||13===t||38===t||40===t){if(e.preventDefault(),k)return void e.stopPropagation();var n,a,s,i,p=g(e.target,l[0],O[0]);"true"===r.liveSearch?a=g(e.target,l[0],P[0]):n=g(e.target,l[0],V[0]),p?13!==t&&38!==t&&40!==t||l.hasClass("open")||(e.stopPropagation(),l.addClass("open"),"undefined"==typeof A&&x(),"true"===r.liveSearch?(P.children().eq(0)[0].focus(),i=d(!0),i&&(B.children().removeClass("active"),b(i).addClass("active"))):(i=d(!0),i&&c(i))):n?27===t?(O[0].focus(),l.hasClass("open")&&l.triggerHandler("blur"),l.removeClass("open"),e.stopPropagation()):38===t?(e.stopPropagation(),i=u(e.target.parentNode,"previousSibling"),i?c(i):(i=d(!1),i&&c(i))):40===t?(e.stopPropagation(),i=u(e.target.parentNode,"nextSibling"),i?c(i):(i=d(!0),i&&c(i))):13===t&&(e.stopPropagation(),s=b(e.target.parentNode),s.hasClass("nya-bs-option")&&(f(s),R||O[0].focus())):a&&(27===t?(O[0].focus(),l.removeClass("open"),e.stopPropagation()):38===t?(e.stopPropagation(),s=o(),s&&(i=u(s[0],"previousSibling"),i?(s.removeClass("active"),b(i).addClass("active")):(i=d(!1),i&&(s.removeClass("active"),b(i).addClass("active"))))):40===t?(e.stopPropagation(),s=o(),s&&(i=u(s[0],"nextSibling"),i?(s.removeClass("active"),b(i).addClass("active")):(i=d(!0),i&&(s.removeClass("active"),b(i).addClass("active"))))):13===t&&(s=o(),s&&(f(s),R||O[0].focus())))}}),a.$on("$destroy",function(){B.off(),O.off(),P.off&&P.off(),t.off("click",U)})}}}}]),T.directive("nyaBsOption",["$parse",function(e){var t=/^\s*(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/;return{restrict:"A",transclude:"element",priority:1e3,terminal:!0,require:["^nyaBsSelect","^ngModel"],compile:function(n,i){var c=i.nyaBsOption,v=document.createComment(" end nyaBsOption: "+c+" "),g=c.match(t);if(!g)throw new Error("invalid expression");var C,m,y,w,$,T=i.value,x=T?e(T):null,A=g[3]||g[1],q=g[2],E=g[4],N=g[5]?e(g[5]):null,L=g[6],k={$id:r},I={};return L?w=e(L):(C=function(e,t){return r(t)},m=function(e){return e}),function(e,t,n,r,i){function c(e){var n,r,c,w,T,x,E,N,k,I,V,H,P,D,M,U=t[0],z=l(),F=[];if($&&(H=[]),a(e))x=e,T=y||C;else{T=y||m,x=[];for(var K in e)e.hasOwnProperty(K)&&"$"!=K.charAt(0)&&x.push(K);x.sort()}for(E=x.length,N=new Array(E),n=0;E>n;n++)if(r=e===x?n:x[n],c=e[r],w=T(r,c,n),M={},q&&(M[q]=r),M[A]=c,F.push(M),$&&(I=$(r,c),-1===H.indexOf(I)&&I&&H.push(I)),B[w])k=B[w],delete B[w],$&&(k.group=I),k.key=r,k.value=c,z[w]=k,N[n]=k;else{if(z[w])throw N.forEach(function(e){e&&e.scope&&(B[e.id]=e)}),new Error("Duplicates in a select are not allowed. Use 'track by' expression to specify unique keys.");N[n]={id:w,scope:void 0,clone:void 0,key:r,value:c},z[w]=!0,I&&(N[n].group=I)}H&&H.length>0&&(N=s(N,H,"group"));for(var j in B)k=B[j],D=o(k.clone),D.removeData("isolateScope"),D.remove(),k.scope.$destroy();for(n=0;E>n;n++)k=N[n],k.scope?(V=U,d(k)!=V&&b(U).after(k.clone),U=u(k),p(k.scope,n,A,k.value,q,k.key,E,k.group)):i(function(e,t){f(e,t),k.scope=t;var a=v.cloneNode(!1);e[e.length++]=a,b(U).after(e),e.addClass("nya-bs-option"),c=g?g(k.key,k.value):k.value||k.key,R.isMultiple?Array.isArray(O.$modelValue)&&h(O.$modelValue,c)&&e.addClass("selected"):S(c,O.$modelValue)&&e.addClass("selected"),U=a,k.clone=e,z[k.id]=k,p(k.scope,n,A,k.value,q,k.key,E,k.group)}),H&&(P&&P===k.group?k.clone.removeClass("first-in-group"):k.clone.addClass("first-in-group"),P=k.group,k.clone.addClass("group-item"));B=z,R.onCollectionChange(F,L)}var g,L,R=r[0],O=r[1],V={};w&&(y=function(t,n,a){return q&&(k[q]=t),k[A]=n,k.$index=a,w(e,k)}),N&&($=function(t,n){return q&&(I[q]=t),I[A]=n,N(e,I)}),q&&(R.keyIdentifier=q),A&&(R.valueIdentifier=A),x&&(R.valueExp=T,g=function(t,n){return q&&(V[q]=t),V[A]=n,x(e,V)});var B=l();"true"===n.deepWatch?(L=!0,e.$watch(E,c,!0)):(L=!1,e.$watchCollection(E,c))}}}}])}();